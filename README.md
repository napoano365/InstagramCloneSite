# README

■自分が苦労した点
・作業計画の立て方
  仕様が文章で与えられた状態から、どのような順番で何を作っていけばいいのか、段取りがわからず、苦労しました。最初は、実物のインスタグラムを確認しながら、紙とペンで制作物のイメージを描き、それをベースに空のページを遷移するだけのWebサイトの箱を作成しようとしたのですが、routingを描くにも、modelが必要だったり、controllerが必要だったりと、作業が行ったりきたりするので作業の抜け漏れも多く、エラーの躓いては修正するの連続でした。もっと効率の良い作業の進め方を検討していきたいです。
・CSSが効かない
　Bootstrapやブラウザ標準のStylesheetなどが優先され、自分の書いたscssのコードがうまく効かず、レイアウトの調整にかなり時間を取られました。コードの管理についても、自動生成されるシートにかき分けるべきなのか、RailsTutorialのようにCustom.scssにまとめて書いた方が管理しやすいのか、などcssの作成のお作法の部分でベターのプラクティスがわからず、試行錯誤を強いられ、時間がかかりました。もっと、メンテナンスが用意で可読性の高いコードにまとめるための方法を学びたいです。またBootstrapnotukaikata ・レスポンシブ・ブラウザ別対応などきちんと学習する時間を取ろうと思います。
・Facebook認証の実装
  Githubのリファレンス情報を読みといた以後も、細かな部分までは設定方法が書かれていなかったため、様々な検索キーワードで質問サイトや記事を漁り、コードを描いては試し、を繰り返しました。Gem自体やfacebook側の仕様のアップデートもあったのか、ネット上の情報は古くなっているものが多く公式の情報だけでは足りない部分の知見を集めるのにとても苦労しました。
・DRYにできない
  フォローボタンやいいねのアイコンなど、Partial化して、renderで呼び出せそうなものに気づいても、Viewを表示してくれるコントローラやアクションの中でインスタンス変数を定義できていなかったり、modelの文脈が違ったり（usersなのか、postsなのか、など）によって挙動が違い、DRYな記述にできないことがありました。

■学んだ点
・Gem管理
　bundleの使い方や、アプリごとにgemのインストール先を区別し管理する方法、.gitignoreファイルやGemfile.lockファイルの意味など学びました。
・byebugの使い方
　Webサイトが思うとおりの挙動をしないときに、debuggerを埋め込み、処理を途中で止め、paramsやsession変数に何が入っているかを確認することで
　不具合の原因を調査できるようになりました。
・fontの追加、アイコンの表示。
　インスタグラムのロゴフォントを追加し、使用できるようになりました。またFontAwesomeなど外部サービスを使用し、アイコンを埋め込めるようになりました。
・form_forの利用法の習熟
　classを設定したり、placeholderを与えたり、methodを指定したり、とform_forのオプションを利用できるようになりました。
・クラスメソッド/インスタンスメソッド/ヘルパーメソッドの作成の習熟
　RailsTutorial終了段階では、何がどこから呼び出されているのかいまひとつピンと来ていない部分もあったのですが
　どのファイルにどのようなメソッドを定義すれば、どこで呼び出せるのかを考えて、実装できるようになりました。
・resourcesへの習熟
　●●_pathと指定したときに、どのURLに飛び、何コントローラの何アクションが反応してくれるのかについて、理解が深まりました。
・chromeデベロッパーツールへの習熟
　どの要素にどのCSSが当たっているのかの確認方法にChromeのデベロッパーツールを使えるようになりました。

■自慢したい・相談したい点
<相談したい点>
・画像投稿
  画像を横3列でレイアウトすることができませんでした。（bootstrapを利用し、classに「col-md-4」等と設定すれば、4枚目の写真からは2行目に移ってくれるのでは・・・と試してのですがうまくいきませんでした。）どのように設定すればよかったのでしょうか。また、実物のインスタグラムのサイトでは、画面の表示幅を狭めると、画像が自動的に縮小されていくのですが、この実装はどのようされているのでしょうか。

・FaceBook認証ですが、「Rails server」で確認すると、Facebookの認証ページが表示され、処理が成功するのですが
  Herokuにデプロイしたアプリだと「無効なID…」というエラーで止まってしまいます。有効なOAuthリダイレクトURIの設定や、環境変数の設定がうまくいっていないかと考えているのですが、詳細をご確認いただけないでしょうか。また今回、作業途中はdotenvというgemを使って、.envファイルにfacebookアプリのIDやsecret keyをgitのバージョン管理化から外していたのですが本番環境でこのような情報を運用していくときは、どこに格納しどのように管理していくことが多いでしょうか。

・通知機能について
  工数が足りず実装ができなかったのですが以下のような設計方針で、あっておりますでしょうか。
  >次を通知する「①自分の投稿がいいねされたこと」「②自分のコメントに返信があったこと」「③自分がフォローされたこと」
  ◆model
  >Notificationモデルを作成する。Userモデルに対して、複数持つことを定義しておく。
  >カラムには以下を準備する。
　  id:主キー
　  actionuser_id:①(いいねしたユーザー)②(返信したユーザー)③(フォローしたユーザー)
　  post_id:①(自分の投稿を識別)
　  comment_id:②(自分のコメント)
　  followed_id:③(フォローされた自分のid)
　  actiontype:'like','reply','follow'(お知らせの種類)
　  checked:(確認済か否かのフラグ、boolean型でデフォルトはfalse)
　  created_at:
　  updated_at:
  ◆Controller
  >①②③のそれぞれの処理を行っているcontrller、アクションのなかで、Notification.create(actionに応じたパラメータを渡す)を実行させる
  ◆view
  >画面右上のheader部分のハートアイコンを押すと、通知一覧の画面に遷移し、created_atの最新順で、通知が表示される。
  >actiontypeの値に応じて、自動生成させる文章の型を切り替える。
  >通知一覧を表示する処理に合わせ、　checked: trueを設定する。
  >[if current_user.notifications.where(checked: false).count >= 1 ]のようなif文で、未チェックの通知がある場合に、通知ありのアイコンに切り替える
